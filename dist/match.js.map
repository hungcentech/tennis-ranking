{"version":3,"sources":["../server/match.js"],"names":["validMatchStatus","New","Playing","Finished","matchFieldType","type","format","status","teams","scores","referees","created","begin_date","end_date","cleanupMatch","match","cleanedUpMatch","Object","keys","forEach","field","validateMatch","errors","push","length","join","convertMatch","Date","completionDate"],"mappings":";;;;;;AAAA;AAEA,IAAMA,gBAAgB,GAAG;AACvBC,EAAAA,GAAG,EAAE,IADkB;AAEvBC,EAAAA,OAAO,EAAE,IAFc;AAGvBC,EAAAA,QAAQ,EAAE;AAHa,CAAzB,C,CAMA;;AAEA,IAAMC,cAAc,GAAG;AACrBC,EAAAA,IAAI,EAAE,UADe;AACH;AAClBC,EAAAA,MAAM,EAAE,UAFa;AAED;AACpBC,EAAAA,MAAM,EAAE,UAHa;AAGD;AACpBC,EAAAA,KAAK,EAAE,UAJc;AAIF;AACnBC,EAAAA,MAAM,EAAE,UALa;AAKD;AACpBC,EAAAA,QAAQ,EAAE,UANW;AAMC;AACtBC,EAAAA,OAAO,EAAE,UAPY;AAOA;AACrBC,EAAAA,UAAU,EAAE,UARS;AAQG;AACxBC,EAAAA,QAAQ,EAAE,UATW,CASA;;AATA,CAAvB,C,CAYA;;AAEA,SAASC,YAAT,CAAsBC,KAAtB,EAA6B;AAC3B,MAAMC,cAAc,GAAG,EAAvB;AACAC,EAAAA,MAAM,CAACC,IAAP,CAAYH,KAAZ,EAAmBI,OAAnB,CAA2B,UAAAC,KAAK,EAAI;AAClC,QAAIhB,cAAc,CAACgB,KAAD,CAAlB,EAA2BJ,cAAc,CAACI,KAAD,CAAd,GAAwBL,KAAK,CAACK,KAAD,CAA7B;AAC5B,GAFD;AAGA,MAAI,CAACJ,cAAc,CAAC,QAAD,CAAnB,EAA+BA,cAAc,CAAC,QAAD,CAAd,GAA2B,CAA3B;AAC/B,SAAOA,cAAP;AACD,C,CAED;;;AAEA,SAASK,aAAT,CAAuBN,KAAvB,EAA8B;AAC5B,MAAMO,MAAM,GAAG,EAAf;AACAL,EAAAA,MAAM,CAACC,IAAP,CAAYd,cAAZ,EAA4Be,OAA5B,CAAoC,UAAAC,KAAK,EAAI;AAC3C,QAAIhB,cAAc,CAACgB,KAAD,CAAd,KAA0B,UAA1B,IAAwC,CAACL,KAAK,CAACK,KAAD,CAAlD,EAA2D;AACzDE,MAAAA,MAAM,CAACC,IAAP,oCAAwCH,KAAxC;AACD;AACF,GAJD;;AAKA,MAAI,CAACpB,gBAAgB,CAACe,KAAK,CAACR,MAAP,CAArB,EAAqC;AACnCe,IAAAA,MAAM,CAACC,IAAP,WAAeR,KAAK,CAACR,MAArB;AACD;;AACD,SAAOe,MAAM,CAACE,MAAP,GAAgBF,MAAM,CAACG,IAAP,CAAY,IAAZ,CAAhB,GAAoC,IAA3C;AACD,C,CAED;;;AAEA,SAASC,YAAT,CAAsBX,KAAtB,EAA6B;AAC3B,MAAIA,KAAK,CAACJ,OAAV,EAAmBI,KAAK,CAACJ,OAAN,GAAgB,IAAIgB,IAAJ,CAASZ,KAAK,CAACJ,OAAf,CAAhB;AACnB,MAAII,KAAK,CAACa,cAAV,EAA0Bb,KAAK,CAACa,cAAN,GAAuB,IAAID,IAAJ,CAASZ,KAAK,CAACa,cAAf,CAAvB;AAC1B,SAAOd,YAAY,CAACC,KAAD,CAAnB;AACD,C,CAED;;;eAEe;AACbM,EAAAA,aAAa,EAAbA,aADa;AAEbP,EAAAA,YAAY,EAAZA,YAFa;AAGbY,EAAAA,YAAY,EAAZA;AAHa,C,EAMf","sourcesContent":["// -----------------------------------------------------------------------------\n\nconst validMatchStatus = {\n  New: true,\n  Playing: true,\n  Finished: true\n};\n\n// -------------------------------------\n\nconst matchFieldType = {\n  type: \"required\", // \"single/double\"\n  format: \"required\", // \"sets 1, games upto 6:5, no tiebeak, deciding point @ 50\", \"sets 1, games upto 5:5, no tiebeak, deciding point @ 40\"\n  status: \"required\", // validMatchStatus\n  teams: \"required\", // \"{a: [{id: \"\", name: \"\"}, {id: \"\", name: \"\"}], b: [{id: \"\", name: \"\"}, {id: \"\", name: \"\"}]}\"\n  scores: \"required\", // {set: [0, 0], game: [3, 4], point: [40, 15]}\n  referees: \"required\", // [{id: \"\", name: \"\"}]\n  created: \"required\", // Date(\"2019-12-15T09:16:24+07:00\")\n  begin_date: \"required\", // Date(\"2019-12-15T09:16:24+07:00\")\n  end_date: \"required\" // Date(\"2019-12-15T09:16:24+07:00\")\n};\n\n// -------------------------------------\n\nfunction cleanupMatch(match) {\n  const cleanedUpMatch = {};\n  Object.keys(match).forEach(field => {\n    if (matchFieldType[field]) cleanedUpMatch[field] = match[field];\n  });\n  if (!cleanedUpMatch[\"effort\"]) cleanedUpMatch[\"effort\"] = 0;\n  return cleanedUpMatch;\n}\n\n// -------------------------------------\n\nfunction validateMatch(match) {\n  const errors = [];\n  Object.keys(matchFieldType).forEach(field => {\n    if (matchFieldType[field] === \"required\" && !match[field]) {\n      errors.push(`Missing mandatory field: ${field}`);\n    }\n  });\n  if (!validMatchStatus[match.status]) {\n    errors.push(`${match.status} is not a valid status.`);\n  }\n  return errors.length ? errors.join(\"; \") : null;\n}\n\n// -------------------------------------\n\nfunction convertMatch(match) {\n  if (match.created) match.created = new Date(match.created);\n  if (match.completionDate) match.completionDate = new Date(match.completionDate);\n  return cleanupMatch(match);\n}\n\n// -----------------------------------------------------------------------------\n\nexport default {\n  validateMatch,\n  cleanupMatch,\n  convertMatch\n};\n\n// -----------------------------------------------------------------------------\n"],"file":"match.js"}